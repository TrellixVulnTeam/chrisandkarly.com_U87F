jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,e,i,n,o){return jQuery.easing[jQuery.easing.def](t,e,i,n,o)},easeInQuad:function(t,e,i,n,o){return n*(e/=o)*e+i},easeOutQuad:function(t,e,i,n,o){return-n*(e/=o)*(e-2)+i},easeInOutQuad:function(t,e,i,n,o){return(e/=o/2)<1?n/2*e*e+i:-n/2*(--e*(e-2)-1)+i},easeInCubic:function(t,e,i,n,o){return n*(e/=o)*e*e+i},easeOutCubic:function(t,e,i,n,o){return n*((e=e/o-1)*e*e+1)+i},easeInOutCubic:function(t,e,i,n,o){return(e/=o/2)<1?n/2*e*e*e+i:n/2*((e-=2)*e*e+2)+i},easeInQuart:function(t,e,i,n,o){return n*(e/=o)*e*e*e+i},easeOutQuart:function(t,e,i,n,o){return-n*((e=e/o-1)*e*e*e-1)+i},easeInOutQuart:function(t,e,i,n,o){return(e/=o/2)<1?n/2*e*e*e*e+i:-n/2*((e-=2)*e*e*e-2)+i},easeInQuint:function(t,e,i,n,o){return n*(e/=o)*e*e*e*e+i},easeOutQuint:function(t,e,i,n,o){return n*((e=e/o-1)*e*e*e*e+1)+i},easeInOutQuint:function(t,e,i,n,o){return(e/=o/2)<1?n/2*e*e*e*e*e+i:n/2*((e-=2)*e*e*e*e+2)+i},easeInSine:function(t,e,i,n,o){return-n*Math.cos(e/o*(Math.PI/2))+n+i},easeOutSine:function(t,e,i,n,o){return n*Math.sin(e/o*(Math.PI/2))+i},easeInOutSine:function(t,e,i,n,o){return-n/2*(Math.cos(Math.PI*e/o)-1)+i},easeInExpo:function(t,e,i,n,o){return 0==e?i:n*Math.pow(2,10*(e/o-1))+i},easeOutExpo:function(t,e,i,n,o){return e==o?i+n:n*(1-Math.pow(2,-10*e/o))+i},easeInOutExpo:function(t,e,i,n,o){return 0==e?i:e==o?i+n:(e/=o/2)<1?n/2*Math.pow(2,10*(e-1))+i:n/2*(2-Math.pow(2,-10*--e))+i},easeInCirc:function(t,e,i,n,o){return-n*(Math.sqrt(1-(e/=o)*e)-1)+i},easeOutCirc:function(t,e,i,n,o){return n*Math.sqrt(1-(e=e/o-1)*e)+i},easeInOutCirc:function(t,e,i,n,o){return(e/=o/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+i:n/2*(Math.sqrt(1-(e-=2)*e)+1)+i},easeInElastic:function(t,e,i,n,o){var a=1.70158,r=0,s=n;return 0==e?i:1==(e/=o)?i+n:(r=r||.3*o,a=s<Math.abs(n)?(s=n,r/4):r/(2*Math.PI)*Math.asin(n/s),-(s*Math.pow(2,10*--e)*Math.sin((e*o-a)*(2*Math.PI)/r))+i)},easeOutElastic:function(t,e,i,n,o){var a=1.70158,r=0,s=n;return 0==e?i:1==(e/=o)?i+n:(r=r||.3*o,a=s<Math.abs(n)?(s=n,r/4):r/(2*Math.PI)*Math.asin(n/s),s*Math.pow(2,-10*e)*Math.sin((e*o-a)*(2*Math.PI)/r)+n+i)},easeInOutElastic:function(t,e,i,n,o){var a=1.70158,r=0,s=n;return 0==e?i:2==(e/=o/2)?i+n:(r=r||o*(.3*1.5),a=s<Math.abs(n)?(s=n,r/4):r/(2*Math.PI)*Math.asin(n/s),e<1?s*Math.pow(2,10*--e)*Math.sin((e*o-a)*(2*Math.PI)/r)*-.5+i:s*Math.pow(2,-10*--e)*Math.sin((e*o-a)*(2*Math.PI)/r)*.5+n+i)},easeInBack:function(t,e,i,n,o,a){return n*(e/=o)*e*(((a=null==a?1.70158:a)+1)*e-a)+i},easeOutBack:function(t,e,i,n,o,a){return n*((e=e/o-1)*e*(((a=null==a?1.70158:a)+1)*e+a)+1)+i},easeInOutBack:function(t,e,i,n,o,a){return null==a&&(a=1.70158),(e/=o/2)<1?n/2*(e*e*((1+(a*=1.525))*e-a))+i:n/2*((e-=2)*e*((1+(a*=1.525))*e+a)+2)+i},easeInBounce:function(t,e,i,n,o){return n-jQuery.easing.easeOutBounce(t,o-e,0,n,o)+i},easeOutBounce:function(t,e,i,n,o){return(e/=o)<1/2.75?n*(7.5625*e*e)+i:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+i:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+i:n*(7.5625*(e-=2.625/2.75)*e+.984375)+i},easeInOutBounce:function(t,e,i,n,o){return e<o/2?.5*jQuery.easing.easeInBounce(t,2*e,0,n,o)+i:.5*jQuery.easing.easeOutBounce(t,2*e-o,0,n,o)+.5*n+i}}),function(i,n,A,d){"use strict";function p(t){return t&&t.hasOwnProperty&&t instanceof A}function H(t){return u(t)&&0<t.indexOf("%")}function W(t,e){var i=parseInt(t,10)||0;return e&&H(t)&&(i=z.getViewport()[e]/100*i),Math.ceil(i)}function L(t,e){return W(t,e)+"px"}var o=A("html"),a=A(i),h=A(n),z=A.fancybox=function(){z.open.apply(this,arguments)},r=navigator.userAgent.match(/msie/i),s=null,c=n.createTouch!==d,u=function(t){return t&&"string"===A.type(t)};A.extend(z,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!c,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(r?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:A.noop,beforeLoad:A.noop,afterLoad:A.noop,beforeShow:A.noop,afterShow:A.noop,beforeChange:A.noop,beforeClose:A.noop,afterClose:A.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(h,c){if(h&&(A.isPlainObject(c)||(c={}),!1!==z.close(!0)))return A.isArray(h)||(h=p(h)?A(h).get():[h]),A.each(h,function(t,e){var i,n,o,a,r,s,l={};"object"===A.type(e)&&(e.nodeType&&(e=A(e)),p(e)?(l={href:e.data("fancybox-href")||e.attr("href"),title:e.data("fancybox-title")||e.attr("title"),isDom:!0,element:e},A.metadata&&A.extend(!0,l,e.metadata())):l=e),i=c.href||l.href||(u(e)?e:null),n=c.title!==d?c.title:l.title||"",!(a=(o=c.content||l.content)?"html":c.type||l.type)&&l.isDom&&(a=(a=e.data("fancybox-type"))||((r=e.prop("class").match(/fancybox\.(\w+)/))?r[1]:null)),u(i)&&(a||(z.isImage(i)?a="image":z.isSWF(i)?a="swf":"#"===i.charAt(0)?a="inline":u(e)&&(a="html",o=e)),"ajax"===a&&(i=(s=i.split(/\s+/,2)).shift(),s=s.shift())),o||("inline"===a?i?o=A(u(i)?i.replace(/.*(?=#[^\s]+$)/,""):i):l.isDom&&(o=e):"html"===a?o=i:a||i||!l.isDom||(a="inline",o=e)),A.extend(l,{href:i,type:a,content:o,title:n,selector:s}),h[t]=l}),z.opts=A.extend(!0,{},z.defaults,c),c.keys!==d&&(z.opts.keys=!!c.keys&&A.extend({},z.defaults.keys,c.keys)),z.group=h,z._start(z.opts.index)},cancel:function(){var t=z.coming;t&&!1!==z.trigger("onCancel")&&(z.hideLoading(),z.ajaxLoad&&z.ajaxLoad.abort(),z.ajaxLoad=null,z.imgPreload&&(z.imgPreload.onload=z.imgPreload.onerror=null),t.wrap&&t.wrap.stop(!0,!0).trigger("onReset").remove(),z.coming=null,z.current||z._afterZoomOut(t))},close:function(t){z.cancel(),!1!==z.trigger("beforeClose")&&(z.unbindEvents(),z.isActive&&(z.isOpen&&!0!==t?(z.isOpen=z.isOpened=!1,z.isClosing=!0,A(".fancybox-item, .fancybox-nav").remove(),z.wrap.stop(!0,!0).removeClass("fancybox-opened"),z.transitions[z.current.closeMethod]()):(A(".fancybox-wrap").stop(!0).trigger("onReset").remove(),z._afterZoomOut())))},play:function(t){function e(){n(),z.current&&z.player.isActive&&(z.player.timer=setTimeout(z.next,z.current.playSpeed))}function i(){n(),h.unbind(".player"),z.player.isActive=!1,z.trigger("onPlayEnd")}var n=function(){clearTimeout(z.player.timer)};!0===t||!z.player.isActive&&!1!==t?z.current&&(z.current.loop||z.current.index<z.group.length-1)&&(z.player.isActive=!0,h.bind({"onCancel.player beforeClose.player":i,"onUpdate.player":e,"beforeLoad.player":n}),e(),z.trigger("onPlayStart")):i()},next:function(t){var e=z.current;e&&(u(t)||(t=e.direction.next),z.jumpto(e.index+1,t,"next"))},prev:function(t){var e=z.current;e&&(u(t)||(t=e.direction.prev),z.jumpto(e.index-1,t,"prev"))},jumpto:function(t,e,i){var n=z.current;n&&(t=W(t),z.direction=e||n.direction[t>=n.index?"next":"prev"],z.router=i||"jumpto",n.loop&&(t<0&&(t=n.group.length+t%n.group.length),t%=n.group.length),n.group[t]!==d&&(z.cancel(),z._start(t)))},reposition:function(t,e){var i=z.current,n=i?i.wrap:null;n&&(e=z._getPosition(e),t&&"scroll"===t.type?(delete e.position,n.stop(!0,!0).animate(e,200)):(n.css(e),i.pos=A.extend({},i.dim,e)))},update:function(e){var i=e&&e.type,n=!i||"orientationchange"===i;n&&(clearTimeout(s),s=null),z.isOpen&&!s&&(s=setTimeout(function(){var t=z.current;t&&!z.isClosing&&(z.wrap.removeClass("fancybox-tmp"),(n||"load"===i||"resize"===i&&t.autoResize)&&z._setDimension(),"scroll"===i&&t.canShrink||z.reposition(e),z.trigger("onUpdate"),s=null)},n&&!c?0:300))},toggle:function(t){z.isOpen&&(z.current.fitToView="boolean"===A.type(t)?t:!z.current.fitToView,c&&(z.wrap.removeAttr("style").addClass("fancybox-tmp"),z.trigger("onUpdate")),z.update())},hideLoading:function(){h.unbind(".loading"),A("#fancybox-loading").remove()},showLoading:function(){var t,e;z.hideLoading(),t=A('<div id="fancybox-loading"><div></div></div>').click(z.cancel).appendTo("body"),h.bind("keydown.loading",function(t){27===(t.which||t.keyCode)&&(t.preventDefault(),z.cancel())}),z.defaults.fixed||(e=z.getViewport(),t.css({position:"absolute",top:.5*e.h+e.y,left:.5*e.w+e.x}))},getViewport:function(){var t=z.current&&z.current.locked||!1,e={x:a.scrollLeft(),y:a.scrollTop()};return t?(e.w=t[0].clientWidth,e.h=t[0].clientHeight):(e.w=c&&i.innerWidth?i.innerWidth:a.width(),e.h=c&&i.innerHeight?i.innerHeight:a.height()),e},unbindEvents:function(){z.wrap&&p(z.wrap)&&z.wrap.unbind(".fb"),h.unbind(".fb"),a.unbind(".fb")},bindEvents:function(){var e,l=z.current;l&&(a.bind("orientationchange.fb"+(c?"":" resize.fb")+(l.autoCenter&&!l.locked?" scroll.fb":""),z.update),(e=l.keys)&&h.bind("keydown.fb",function(i){var n=i.which||i.keyCode,t=i.target||i.srcElement;if(27===n&&z.coming)return!1;i.ctrlKey||i.altKey||i.shiftKey||i.metaKey||t&&(t.type||A(t).is("[contenteditable]"))||A.each(e,function(t,e){return 1<l.group.length&&e[n]!==d?(z[t](e[n]),i.preventDefault(),!1):-1<A.inArray(n,e)?(z[t](),i.preventDefault(),!1):void 0})}),A.fn.mousewheel&&l.mouseWheel&&z.wrap.bind("mousewheel.fb",function(t,e,i,n){for(var o,a=t.target||null,r=A(a),s=!1;r.length&&!(s||r.is(".fancybox-skin")||r.is(".fancybox-wrap"));)s=(o=r[0])&&!(o.style.overflow&&"hidden"===o.style.overflow)&&(o.clientWidth&&o.scrollWidth>o.clientWidth||o.clientHeight&&o.scrollHeight>o.clientHeight),r=A(r).parent();0===e||s||1<z.group.length&&!l.canShrink&&(0<n||0<i?z.prev(0<n?"down":"left"):(n<0||i<0)&&z.next(n<0?"up":"right"),t.preventDefault())}))},trigger:function(i,t){var e,n=t||z.coming||z.current;if(n){if(!1===(e=A.isFunction(n[i])?n[i].apply(n,Array.prototype.slice.call(arguments,1)):e))return!1;n.helpers&&A.each(n.helpers,function(t,e){e&&z.helpers[t]&&A.isFunction(z.helpers[t][i])&&z.helpers[t][i](A.extend(!0,{},z.helpers[t].defaults,e),n)}),h.trigger(i)}},isImage:function(t){return u(t)&&t.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(t){return u(t)&&t.match(/\.(swf)((\?|#).*)?$/i)},_start:function(t){var e,i,n={};if(t=W(t),!(i=z.group[t]||null))return!1;if(e=(n=A.extend(!0,{},z.opts,i)).margin,i=n.padding,"number"===A.type(e)&&(n.margin=[e,e,e,e]),"number"===A.type(i)&&(n.padding=[i,i,i,i]),n.modal&&A.extend(!0,n,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),n.autoSize&&(n.autoWidth=n.autoHeight=!0),"auto"===n.width&&(n.autoWidth=!0),"auto"===n.height&&(n.autoHeight=!0),n.group=z.group,n.index=t,z.coming=n,!1!==z.trigger("beforeLoad")){if(e=n.type,i=n.href,!e)return z.coming=null,!(!z.current||!z.router||"jumpto"===z.router)&&(z.current.index=t,z[z.router](z.direction));if(z.isActive=!0,"image"!==e&&"swf"!==e||(n.autoHeight=n.autoWidth=!1,n.scrolling="visible"),"image"===e&&(n.aspectRatio=!0),"iframe"===e&&c&&(n.scrolling="scroll"),n.wrap=A(n.tpl.wrap).addClass("fancybox-"+(c?"mobile":"desktop")+" fancybox-type-"+e+" fancybox-tmp "+n.wrapCSS).appendTo(n.parent||"body"),A.extend(n,{skin:A(".fancybox-skin",n.wrap),outer:A(".fancybox-outer",n.wrap),inner:A(".fancybox-inner",n.wrap)}),A.each(["Top","Right","Bottom","Left"],function(t,e){n.skin.css("padding"+e,L(n.padding[t]))}),z.trigger("onReady"),"inline"===e||"html"===e){if(!n.content||!n.content.length)return z._error("content")}else if(!i)return z._error("href");"image"===e?z._loadImage():"ajax"===e?z._loadAjax():"iframe"===e?z._loadIframe():z._afterLoad()}else z.coming=null},_error:function(t){A.extend(z.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:t,content:z.coming.tpl.error}),z._afterLoad()},_loadImage:function(){var t=z.imgPreload=new Image;t.onload=function(){this.onload=this.onerror=null,z.coming.width=this.width/z.opts.pixelRatio,z.coming.height=this.height/z.opts.pixelRatio,z._afterLoad()},t.onerror=function(){this.onload=this.onerror=null,z._error("image")},t.src=z.coming.href,!0!==t.complete&&z.showLoading()},_loadAjax:function(){var i=z.coming;z.showLoading(),z.ajaxLoad=A.ajax(A.extend({},i.ajax,{url:i.href,error:function(t,e){z.coming&&"abort"!==e?z._error("ajax",t):z.hideLoading()},success:function(t,e){"success"===e&&(i.content=t,z._afterLoad())}}))},_loadIframe:function(){var t=z.coming,e=A(t.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",c?"auto":t.iframe.scrolling).attr("src",t.href);A(t.wrap).bind("onReset",function(){try{A(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(t){}}),t.iframe.preload&&(z.showLoading(),e.one("load",function(){A(this).data("ready",1),c||A(this).bind("load.fb",z.update),A(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),z._afterLoad()})),t.content=e.appendTo(t.inner),t.iframe.preload||z._afterLoad()},_preloadImages:function(){for(var t,e=z.group,i=z.current,n=e.length,o=i.preload?Math.min(i.preload,n-1):0,a=1;a<=o;a+=1)"image"===(t=e[(i.index+a)%n]).type&&t.href&&((new Image).src=t.href)},_afterLoad:function(){var t,i,e,n,o,a=z.coming,r=z.current,s="fancybox-placeholder";if(z.hideLoading(),a&&!1!==z.isActive){if(!1===z.trigger("afterLoad",a,r))return a.wrap.stop(!0).trigger("onReset").remove(),void(z.coming=null);switch(r&&(z.trigger("beforeChange",r),r.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),z.unbindEvents(),i=(t=a).content,e=a.type,a=a.scrolling,A.extend(z,{wrap:t.wrap,skin:t.skin,outer:t.outer,inner:t.inner,current:t,previous:r}),n=t.href,e){case"inline":case"ajax":case"html":t.selector?i=A("<div>").html(i).find(t.selector):p(i)&&(i.data(s)||i.data(s,A('<div class="'+s+'"></div>').insertAfter(i).hide()),i=i.show().detach(),t.wrap.bind("onReset",function(){A(this).find(i).length&&i.hide().replaceAll(i.data(s)).data(s,!1)}));break;case"image":i=t.tpl.image.replace("{href}",n);break;case"swf":i='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+n+'"></param>',o="",A.each(t.swf,function(t,e){i+='<param name="'+t+'" value="'+e+'"></param>',o+=" "+t+'="'+e+'"'}),i+='<embed src="'+n+'" type="application/x-shockwave-flash" width="100%" height="100%"'+o+"></embed></object>"}p(i)&&i.parent().is(t.inner)||t.inner.append(i),z.trigger("beforeShow"),t.inner.css("overflow","yes"===a?"scroll":"no"===a?"hidden":a),z._setDimension(),z.reposition(),z.isOpen=!1,z.coming=null,z.bindEvents(),z.isOpened?r.prevMethod&&z.transitions[r.prevMethod]():A(".fancybox-wrap").not(t.wrap).stop(!0).trigger("onReset").remove(),z.transitions[z.isOpened?t.nextMethod:t.openMethod](),z._preloadImages()}},_setDimension:function(){var t,e,i,n,o,a,r,s,l,h,c,d,p,u,f,g=z.getViewport(),m=0,y=z.wrap,v=z.skin,w=z.inner,x=z.current,b=x.width,k=x.height,S=x.minWidth,C=x.minHeight,R=x.maxWidth,j=x.maxHeight,O=x.scrolling,I=x.scrollOutside?x.scrollbarWidth:0,T=x.margin,E=W(T[1]+T[3]),M=W(T[0]+T[2]);if(y.add(v).add(w).width("auto").height("auto").removeClass("fancybox-tmp"),o=E+(i=W(v.outerWidth(!0)-v.width())),a=M+(n=W(v.outerHeight(!0)-v.height())),r=H(b)?(g.w-o)*W(b)/100:b,s=H(k)?(g.h-a)*W(k)/100:k,"iframe"===x.type){if(u=x.content,x.autoHeight&&1===u.data("ready"))try{u[0].contentWindow.document.location&&(w.width(r).height(9999),f=u.contents().find("body"),I&&f.css("overflow-x","hidden"),s=f.outerHeight(!0))}catch(t){}}else(x.autoWidth||x.autoHeight)&&(w.addClass("fancybox-tmp"),x.autoWidth||w.width(r),x.autoHeight||w.height(s),x.autoWidth&&(r=w.width()),x.autoHeight&&(s=w.height()),w.removeClass("fancybox-tmp"));if(b=W(r),k=W(s),l=r/s,S=W(H(S)?W(S,"w")-o:S),R=W(H(R)?W(R,"w")-o:R),C=W(H(C)?W(C,"h")-a:C),T=R,f=j=W(H(j)?W(j,"h")-a:j),x.fitToView&&(R=Math.min(g.w-o,R),j=Math.min(g.h-a,j)),d=g.w-E,p=g.h-M,x.aspectRatio?(k=(b=j<(k=R<b?W((b=R)/l):k)?W((k=j)*l):b)<S?W((b=S)/l):k)<C&&(b=W((k=C)*l)):(b=Math.max(S,Math.min(b,R)),x.autoHeight&&"iframe"!==x.type&&(w.width(b),k=w.height()),k=Math.max(C,Math.min(k,j))),x.fitToView)if(w.width(b).height(k),y.width(b+i),h=y.width(),c=y.height(),x.aspectRatio)for(;(d<h||p<c)&&S<b&&C<k&&!(19<m++);)k=Math.max(C,Math.min(j,k-10)),(b=W(k*l))<S&&(k=W((b=S)/l)),R<b&&(k=W((b=R)/l)),w.width(b).height(k),y.width(b+i),h=y.width(),c=y.height();else b=Math.max(S,Math.min(b,b-(h-d))),k=Math.max(C,Math.min(k,k-(c-p)));I&&"auto"===O&&k<s&&b+i+I<d&&(b+=I),w.width(b).height(k),y.width(b+i),h=y.width(),c=y.height(),t=(d<h||p<c)&&S<b&&C<k,e=x.aspectRatio?b<T&&k<f&&b<r&&k<s:(b<T||k<f)&&(b<r||k<s),A.extend(x,{dim:{width:L(h),height:L(c)},origWidth:r,origHeight:s,canShrink:t,canExpand:e,wPadding:i,hPadding:n,wrapSpace:c-v.outerHeight(!0),skinSpace:v.height()-k}),!u&&x.autoHeight&&C<k&&k<j&&!e&&w.height("auto")},_getPosition:function(t){var e=z.current,i=z.getViewport(),n=e.margin,o=z.wrap.width()+n[1]+n[3],a=z.wrap.height()+n[0]+n[2],n={position:"absolute",top:n[0],left:n[3]};return e.autoCenter&&e.fixed&&!t&&a<=i.h&&o<=i.w?n.position="fixed":e.locked||(n.top+=i.y,n.left+=i.x),n.top=L(Math.max(n.top,n.top+(i.h-a)*e.topRatio)),n.left=L(Math.max(n.left,n.left+(i.w-o)*e.leftRatio)),n},_afterZoomIn:function(){var e=z.current;e&&(z.isOpen=z.isOpened=!0,z.wrap.css("overflow","visible").addClass("fancybox-opened"),z.update(),(e.closeClick||e.nextClick&&1<z.group.length)&&z.inner.css("cursor","pointer").bind("click.fb",function(t){A(t.target).is("a")||A(t.target).parent().is("a")||(t.preventDefault(),z[e.closeClick?"close":"next"]())}),e.closeBtn&&A(e.tpl.closeBtn).appendTo(z.skin).bind("click.fb",function(t){t.preventDefault(),z.close()}),e.arrows&&1<z.group.length&&((e.loop||0<e.index)&&A(e.tpl.prev).appendTo(z.outer).bind("click.fb",z.prev),(e.loop||e.index<z.group.length-1)&&A(e.tpl.next).appendTo(z.outer).bind("click.fb",z.next)),z.trigger("afterShow"),e.loop||e.index!==e.group.length-1?z.opts.autoPlay&&!z.player.isActive&&(z.opts.autoPlay=!1,z.play()):z.play(!1))},_afterZoomOut:function(t){t=t||z.current,A(".fancybox-wrap").trigger("onReset").remove(),A.extend(z,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),z.trigger("afterClose",t)}}),z.transitions={getOrigPosition:function(){var t=z.current,e=t.element,i=t.orig,n={},o=50,a=50,r=t.hPadding,s=t.wPadding,l=z.getViewport();return!i&&t.isDom&&e.is(":visible")&&((i=e.find("img:first")).length||(i=e)),p(i)?(n=i.offset(),i.is("img")&&(o=i.outerWidth(),a=i.outerHeight())):(n.top=l.y+(l.h-a)*t.topRatio,n.left=l.x+(l.w-o)*t.leftRatio),"fixed"!==z.wrap.css("position")&&!t.locked||(n.top-=l.y,n.left-=l.x),n={top:L(n.top-r*t.topRatio),left:L(n.left-s*t.leftRatio),width:L(o+s),height:L(a+r)}},step:function(t,e){var i=e.prop,n=z.current,o=n.wrapSpace,a=n.skinSpace;"width"!==i&&"height"!==i||(e=e.end===e.start?1:(t-e.start)/(e.end-e.start),z.isClosing&&(e=1-e),n=t-("width"===i?n.wPadding:n.hPadding),z.skin[i](W("width"===i?n:n-o*e)),z.inner[i](W("width"===i?n:n-o*e-a*e)))},zoomIn:function(){var t=z.current,e=t.pos,i=t.openEffect,n="elastic"===i,o=A.extend({opacity:1},e);delete o.position,n?(e=this.getOrigPosition(),t.openOpacity&&(e.opacity=.1)):"fade"===i&&(e.opacity=.1),z.wrap.css(e).animate(o,{duration:"none"===i?0:t.openSpeed,easing:t.openEasing,step:n?this.step:null,complete:z._afterZoomIn})},zoomOut:function(){var t=z.current,e=t.closeEffect,i="elastic"===e,n={opacity:.1};i&&(n=this.getOrigPosition(),t.closeOpacity&&(n.opacity=.1)),z.wrap.animate(n,{duration:"none"===e?0:t.closeSpeed,easing:t.closeEasing,step:i?this.step:null,complete:z._afterZoomOut})},changeIn:function(){var t,e=z.current,i=e.nextEffect,n=e.pos,o={opacity:1},a=z.direction;n.opacity=.1,"elastic"===i&&(t="down"===a||"up"===a?"top":"left","down"===a||"right"===a?(n[t]=L(W(n[t])-200),o[t]="+=200px"):(n[t]=L(W(n[t])+200),o[t]="-=200px")),"none"===i?z._afterZoomIn():z.wrap.css(n).animate(o,{duration:e.nextSpeed,easing:e.nextEasing,complete:z._afterZoomIn})},changeOut:function(){var t=z.previous,e=t.prevEffect,i={opacity:.1},n=z.direction;"elastic"===e&&(i["down"===n||"up"===n?"top":"left"]=("up"===n||"left"===n?"-":"+")+"=200px"),t.wrap.animate(i,{duration:"none"===e?0:t.prevSpeed,easing:t.prevEasing,complete:function(){A(this).trigger("onReset").remove()}})}},z.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!c,fixed:!0},overlay:null,fixed:!1,el:A("html"),create:function(t){t=A.extend({},this.defaults,t),this.overlay&&this.close(),this.overlay=A('<div class="fancybox-overlay"></div>').appendTo((z.coming||t).parent),this.fixed=!1,t.fixed&&z.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(t){var e=this;t=A.extend({},this.defaults,t),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(t),this.fixed||(a.bind("resize.overlay",A.proxy(this.update,this)),this.update()),t.closeClick&&this.overlay.bind("click.overlay",function(t){if(A(t.target).hasClass("fancybox-overlay"))return(z.isActive?z:e).close(),!1}),this.overlay.css(t.css).show()},close:function(){var t,e;a.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(A(".fancybox-margin").removeClass("fancybox-margin"),t=a.scrollTop(),e=a.scrollLeft(),this.el.removeClass("fancybox-lock"),a.scrollTop(t).scrollLeft(e)),A(".fancybox-overlay").remove().hide(),A.extend(this,{overlay:null,fixed:!1})},update:function(){var t,e="100%";this.overlay.width(e).height("100%"),r?(t=Math.max(n.documentElement.offsetWidth,n.body.offsetWidth),h.width()>t&&(e=h.width())):h.width()>a.width()&&(e=h.width()),this.overlay.width(e).height(h.height())},onReady:function(t,e){var i=this.overlay;A(".fancybox-overlay").stop(!0,!0),i||this.create(t),t.locked&&this.fixed&&e.fixed&&(i||(this.margin=h.height()>a.height()&&A("html").css("margin-right").replace("px","")),e.locked=this.overlay.append(e.wrap),e.fixed=!1),!0===t.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(t,e){var i;e.locked&&(!1!==this.margin&&(A("*").filter(function(){return"fixed"===A(this).css("position")&&!A(this).hasClass("fancybox-overlay")&&!A(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),i=a.scrollTop(),e=a.scrollLeft(),this.el.addClass("fancybox-lock"),a.scrollTop(i).scrollLeft(e)),this.open(t)},onUpdate:function(){this.fixed||this.update()},afterClose:function(t){this.overlay&&!z.coming&&this.overlay.fadeOut(t.speedOut,A.proxy(this.close,this))}},z.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(t){var e,i,n=z.current,o=n.title,a=t.type;if(A.isFunction(o)&&(o=o.call(n.element,n)),u(o)&&""!==A.trim(o)){switch(e=A('<div class="fancybox-title fancybox-title-'+a+'-wrap">'+o+"</div>"),a){case"inside":i=z.skin;break;case"outside":i=z.wrap;break;case"over":i=z.inner;break;default:i=z.skin,e.appendTo("body"),r&&e.width(e.width()),e.wrapInner('<span class="child"></span>'),z.current.margin[2]+=Math.abs(W(e.css("margin-bottom")))}e["top"===t.position?"prependTo":"appendTo"](i)}}},A.fn.fancybox=function(a){function t(t){var e,i,n=A(this).blur(),o=l;t.ctrlKey||t.altKey||t.shiftKey||t.metaKey||n.is(".fancybox-wrap")||(e=a.groupAttr||"data-fancybox-group",(i=n.attr(e))||(e="rel",i=n.get(0)[e]),i&&""!==i&&"nofollow"!==i&&(o=(n=(n=s.length?A(s):r).filter("["+e+'="'+i+'"]')).index(this)),a.index=o,!1!==z.open(n,a)&&t.preventDefault())}var r=A(this),s=this.selector||"",l=(a=a||{}).index||0;return s&&!1!==a.live?h.undelegate(s,"click.fb-start").delegate(s+":not('.fancybox-item, .fancybox-nav')","click.fb-start",t):r.unbind("click.fb-start").bind("click.fb-start",t),this.filter("[data-fancybox-start=1]").trigger("click"),this},h.ready(function(){var t,e;A.scrollbarWidth===d&&(A.scrollbarWidth=function(){var t=A('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),e=t.children(),e=e.innerWidth()-e.height(99).innerWidth();return t.remove(),e}),A.support.fixedPosition===d&&(A.support.fixedPosition=(t=A('<div style="position:fixed;top:20px;"></div>').appendTo("body"),e=20===t[0].offsetTop||15===t[0].offsetTop,t.remove(),e)),A.extend(z.defaults,{scrollbarWidth:A.scrollbarWidth(),fixed:A.support.fixedPosition,parent:A("body")}),t=A(i).width(),o.addClass("fancybox-lock-test"),e=A(i).width(),o.removeClass("fancybox-lock-test"),A("<style type='text/css'>.fancybox-margin{margin-right:"+(e-t)+"px;}</style>").appendTo("head")})}(window,document,jQuery),function(n,i,j,c){function d(t){return t&&t.hasOwnProperty&&t instanceof j}function O(t){return p(t)&&0<t.indexOf("%")}function I(t,e){var i=parseInt(t,10)||0;return e&&O(t)&&(i*=E.getViewport()[e]/100),Math.ceil(i)}function T(t,e){return I(t,e)+"px"}var o=j("html"),a=j(n),h=j(i),E=j.fancybox=function(){E.open.apply(this,arguments)},r=navigator.userAgent.match(/msie/i),s=null,l=i.createTouch!==c,p=function(t){return t&&"string"===j.type(t)};j.extend(E,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!l,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(r?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:j.noop,beforeLoad:j.noop,afterLoad:j.noop,beforeShow:j.noop,afterShow:j.noop,beforeChange:j.noop,beforeClose:j.noop,afterClose:j.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(l,h){if(l&&(j.isPlainObject(h)||(h={}),!1!==E.close(!0)))return j.isArray(l)||(l=d(l)?j(l).get():[l]),j.each(l,function(t,e){var i,n,o,a,r,s={};"object"===j.type(e)&&(e.nodeType&&(e=j(e)),d(e)?(s={href:e.data("fancybox-href")||e.attr("href"),title:e.data("fancybox-title")||e.attr("title"),isDom:!0,element:e},j.metadata&&j.extend(!0,s,e.metadata())):s=e),i=h.href||s.href||(p(e)?e:null),n=h.title!==c?h.title:s.title||"",!(a=(o=h.content||s.content)?"html":h.type||s.type)&&s.isDom&&(a=(a=e.data("fancybox-type"))||((a=e.prop("class").match(/fancybox\.(\w+)/))?a[1]:null)),p(i)&&(a||(E.isImage(i)?a="image":E.isSWF(i)?a="swf":"#"===i.charAt(0)?a="inline":p(e)&&(a="html",o=e)),"ajax"===a&&(i=(r=i.split(/\s+/,2)).shift(),r=r.shift())),o||("inline"===a?i?o=j(p(i)?i.replace(/.*(?=#[^\s]+$)/,""):i):s.isDom&&(o=e):"html"===a?o=i:a||i||!s.isDom||(a="inline",o=e)),j.extend(s,{href:i,type:a,content:o,title:n,selector:r}),l[t]=s}),E.opts=j.extend(!0,{},E.defaults,h),h.keys!==c&&(E.opts.keys=!!h.keys&&j.extend({},E.defaults.keys,h.keys)),E.group=l,E._start(E.opts.index)},cancel:function(){var t=E.coming;t&&!1!==E.trigger("onCancel")&&(E.hideLoading(),E.ajaxLoad&&E.ajaxLoad.abort(),E.ajaxLoad=null,E.imgPreload&&(E.imgPreload.onload=E.imgPreload.onerror=null),t.wrap&&t.wrap.stop(!0,!0).trigger("onReset").remove(),E.coming=null,E.current||E._afterZoomOut(t))},close:function(t){E.cancel(),!1!==E.trigger("beforeClose")&&(E.unbindEvents(),E.isActive&&(E.isOpen&&!0!==t?(E.isOpen=E.isOpened=!1,E.isClosing=!0,j(".fancybox-item, .fancybox-nav").remove(),E.wrap.stop(!0,!0).removeClass("fancybox-opened"),E.transitions[E.current.closeMethod]()):(j(".fancybox-wrap").stop(!0).trigger("onReset").remove(),E._afterZoomOut())))},play:function(t){function e(){clearTimeout(E.player.timer)}function i(){e(),E.current&&E.player.isActive&&(E.player.timer=setTimeout(E.next,E.current.playSpeed))}function n(){e(),h.unbind(".player"),E.player.isActive=!1,E.trigger("onPlayEnd")}!0===t||!E.player.isActive&&!1!==t?E.current&&(E.current.loop||E.current.index<E.group.length-1)&&(E.player.isActive=!0,h.bind({"onCancel.player beforeClose.player":n,"onUpdate.player":i,"beforeLoad.player":e}),i(),E.trigger("onPlayStart")):n()},next:function(t){var e=E.current;e&&(p(t)||(t=e.direction.next),E.jumpto(e.index+1,t,"next"))},prev:function(t){var e=E.current;e&&(p(t)||(t=e.direction.prev),E.jumpto(e.index-1,t,"prev"))},jumpto:function(t,e,i){var n=E.current;n&&(t=I(t),E.direction=e||n.direction[t>=n.index?"next":"prev"],E.router=i||"jumpto",n.loop&&(t<0&&(t=n.group.length+t%n.group.length),t%=n.group.length),n.group[t]!==c&&(E.cancel(),E._start(t)))},reposition:function(t,e){var i=E.current,n=i?i.wrap:null;n&&(e=E._getPosition(e),t&&"scroll"===t.type?(delete e.position,n.stop(!0,!0).animate(e,200)):(n.css(e),i.pos=j.extend({},i.dim,e)))},update:function(e){var i=e&&e.type,n=!i||"orientationchange"===i;n&&(clearTimeout(s),s=null),E.isOpen&&!s&&(s=setTimeout(function(){var t=E.current;t&&!E.isClosing&&(E.wrap.removeClass("fancybox-tmp"),(n||"load"===i||"resize"===i&&t.autoResize)&&E._setDimension(),"scroll"===i&&t.canShrink||E.reposition(e),E.trigger("onUpdate"),s=null)},n&&!l?0:300))},toggle:function(t){E.isOpen&&(E.current.fitToView="boolean"===j.type(t)?t:!E.current.fitToView,l&&(E.wrap.removeAttr("style").addClass("fancybox-tmp"),E.trigger("onUpdate")),E.update())},hideLoading:function(){h.unbind(".loading"),j("#fancybox-loading").remove()},showLoading:function(){var t,e;E.hideLoading(),t=j('<div id="fancybox-loading"><div></div></div>').click(E.cancel).appendTo("body"),h.bind("keydown.loading",function(t){27===(t.which||t.keyCode)&&(t.preventDefault(),E.cancel())}),E.defaults.fixed||(e=E.getViewport(),t.css({position:"absolute",top:.5*e.h+e.y,left:.5*e.w+e.x}))},getViewport:function(){var t=E.current&&E.current.locked||!1,e={x:a.scrollLeft(),y:a.scrollTop()};return t?(e.w=t[0].clientWidth,e.h=t[0].clientHeight):(e.w=l&&n.innerWidth?n.innerWidth:a.width(),e.h=l&&n.innerHeight?n.innerHeight:a.height()),e},unbindEvents:function(){E.wrap&&d(E.wrap)&&E.wrap.unbind(".fb"),h.unbind(".fb"),a.unbind(".fb")},bindEvents:function(){var e,r=E.current;r&&(a.bind("orientationchange.fb"+(l?"":" resize.fb")+(r.autoCenter&&!r.locked?" scroll.fb":""),E.update),(e=r.keys)&&h.bind("keydown.fb",function(i){var n=i.which||i.keyCode,t=i.target||i.srcElement;if(27===n&&E.coming)return!1;i.ctrlKey||i.altKey||i.shiftKey||i.metaKey||t&&(t.type||j(t).is("[contenteditable]"))||j.each(e,function(t,e){return 1<r.group.length&&e[n]!==c?(E[t](e[n]),i.preventDefault(),!1):-1<j.inArray(n,e)?(E[t](),i.preventDefault(),!1):void 0})}),j.fn.mousewheel&&r.mouseWheel&&E.wrap.bind("mousewheel.fb",function(t,e,i,n){for(var o=j(t.target||null),a=!1;o.length&&!a&&!o.is(".fancybox-skin")&&!o.is(".fancybox-wrap");)a=o[0]&&!(o[0].style.overflow&&"hidden"===o[0].style.overflow)&&(o[0].clientWidth&&o[0].scrollWidth>o[0].clientWidth||o[0].clientHeight&&o[0].scrollHeight>o[0].clientHeight),o=j(o).parent();0!==e&&!a&&1<E.group.length&&!r.canShrink&&(0<n||0<i?E.prev(0<n?"down":"left"):(n<0||i<0)&&E.next(n<0?"up":"right"),t.preventDefault())}))},trigger:function(i,t){var e,n=t||E.coming||E.current;if(n){if(!1===(e=j.isFunction(n[i])?n[i].apply(n,Array.prototype.slice.call(arguments,1)):e))return!1;n.helpers&&j.each(n.helpers,function(t,e){e&&E.helpers[t]&&j.isFunction(E.helpers[t][i])&&E.helpers[t][i](j.extend(!0,{},E.helpers[t].defaults,e),n)}),h.trigger(i)}},isImage:function(t){return p(t)&&t.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(t){return p(t)&&t.match(/\.(swf)((\?|#).*)?$/i)},_start:function(t){var e,i,n={};if(t=I(t),!(e=E.group[t]||null))return!1;if(e=(n=j.extend(!0,{},E.opts,e)).margin,i=n.padding,"number"===j.type(e)&&(n.margin=[e,e,e,e]),"number"===j.type(i)&&(n.padding=[i,i,i,i]),n.modal&&j.extend(!0,n,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),n.autoSize&&(n.autoWidth=n.autoHeight=!0),"auto"===n.width&&(n.autoWidth=!0),"auto"===n.height&&(n.autoHeight=!0),n.group=E.group,n.index=t,E.coming=n,!1===E.trigger("beforeLoad"))E.coming=null;else{if(i=n.type,e=n.href,!i)return E.coming=null,!(!E.current||!E.router||"jumpto"===E.router)&&(E.current.index=t,E[E.router](E.direction));if(E.isActive=!0,"image"!==i&&"swf"!==i||(n.autoHeight=n.autoWidth=!1,n.scrolling="visible"),"image"===i&&(n.aspectRatio=!0),"iframe"===i&&l&&(n.scrolling="scroll"),n.wrap=j(n.tpl.wrap).addClass("fancybox-"+(l?"mobile":"desktop")+" fancybox-type-"+i+" fancybox-tmp "+n.wrapCSS).appendTo(n.parent||"body"),j.extend(n,{skin:j(".fancybox-skin",n.wrap),outer:j(".fancybox-outer",n.wrap),inner:j(".fancybox-inner",n.wrap)}),j.each(["Top","Right","Bottom","Left"],function(t,e){n.skin.css("padding"+e,T(n.padding[t]))}),E.trigger("onReady"),"inline"===i||"html"===i){if(!n.content||!n.content.length)return E._error("content")}else if(!e)return E._error("href");"image"===i?E._loadImage():"ajax"===i?E._loadAjax():"iframe"===i?E._loadIframe():E._afterLoad()}},_error:function(t){j.extend(E.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:t,content:E.coming.tpl.error}),E._afterLoad()},_loadImage:function(){var t=E.imgPreload=new Image;t.onload=function(){this.onload=this.onerror=null,E.coming.width=this.width/E.opts.pixelRatio,E.coming.height=this.height/E.opts.pixelRatio,E._afterLoad()},t.onerror=function(){this.onload=this.onerror=null,E._error("image")},t.src=E.coming.href,!0!==t.complete&&E.showLoading()},_loadAjax:function(){var i=E.coming;E.showLoading(),E.ajaxLoad=j.ajax(j.extend({},i.ajax,{url:i.href,error:function(t,e){E.coming&&"abort"!==e?E._error("ajax",t):E.hideLoading()},success:function(t,e){"success"===e&&(i.content=t,E._afterLoad())}}))},_loadIframe:function(){var t=E.coming,e=j(t.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",l?"auto":t.iframe.scrolling).attr("src",t.href);j(t.wrap).bind("onReset",function(){try{j(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(t){}}),t.iframe.preload&&(E.showLoading(),e.one("load",function(){j(this).data("ready",1),l||j(this).bind("load.fb",E.update),j(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),E._afterLoad()})),t.content=e.appendTo(t.inner),t.iframe.preload||E._afterLoad()},_preloadImages:function(){for(var t,e=E.group,i=E.current,n=e.length,o=i.preload?Math.min(i.preload,n-1):0,a=1;a<=o;a+=1)"image"===(t=e[(i.index+a)%n]).type&&t.href&&((new Image).src=t.href)},_afterLoad:function(){var i,t,e,n,o,a=E.coming,r=E.current;if(E.hideLoading(),a&&!1!==E.isActive)if(!1===E.trigger("afterLoad",a,r))a.wrap.stop(!0).trigger("onReset").remove(),E.coming=null;else{switch(r&&(E.trigger("beforeChange",r),r.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),E.unbindEvents(),i=a.content,t=a.type,e=a.scrolling,j.extend(E,{wrap:a.wrap,skin:a.skin,outer:a.outer,inner:a.inner,current:a,previous:r}),n=a.href,t){case"inline":case"ajax":case"html":a.selector?i=j("<div>").html(i).find(a.selector):d(i)&&(i.data("fancybox-placeholder")||i.data("fancybox-placeholder",j('<div class="fancybox-placeholder"></div>').insertAfter(i).hide()),i=i.show().detach(),a.wrap.bind("onReset",function(){j(this).find(i).length&&i.hide().replaceAll(i.data("fancybox-placeholder")).data("fancybox-placeholder",!1)}));break;case"image":i=a.tpl.image.replace("{href}",n);break;case"swf":i='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+n+'"></param>',o="",j.each(a.swf,function(t,e){i+='<param name="'+t+'" value="'+e+'"></param>',o+=" "+t+'="'+e+'"'}),i+='<embed src="'+n+'" type="application/x-shockwave-flash" width="100%" height="100%"'+o+"></embed></object>"}d(i)&&i.parent().is(a.inner)||a.inner.append(i),E.trigger("beforeShow"),a.inner.css("overflow","yes"===e?"scroll":"no"===e?"hidden":e),E._setDimension(),E.reposition(),E.isOpen=!1,E.coming=null,E.bindEvents(),E.isOpened?r.prevMethod&&E.transitions[r.prevMethod]():j(".fancybox-wrap").not(a.wrap).stop(!0).trigger("onReset").remove(),E.transitions[E.isOpened?a.nextMethod:a.openMethod](),E._preloadImages()}},_setDimension:function(){var t,e,i,n,o,a,r,s,l,h=E.getViewport(),c=0,d=!1,p=!1,d=E.wrap,u=E.skin,f=E.inner,g=E.current,p=g.width,m=g.height,y=g.minWidth,v=g.minHeight,w=g.maxWidth,x=g.maxHeight,b=g.scrolling,k=g.scrollOutside?g.scrollbarWidth:0,S=g.margin,C=I(S[1]+S[3]),R=I(S[0]+S[2]);if(d.add(u).add(f).width("auto").height("auto").removeClass("fancybox-tmp"),e=C+(S=I(u.outerWidth(!0)-u.width())),i=R+(t=I(u.outerHeight(!0)-u.height())),n=O(p)?(h.w-e)*I(p)/100:p,o=O(m)?(h.h-i)*I(m)/100:m,"iframe"===g.type){if(l=g.content,g.autoHeight&&1===l.data("ready"))try{l[0].contentWindow.document.location&&(f.width(n).height(9999),a=l.contents().find("body"),k&&a.css("overflow-x","hidden"),o=a.outerHeight(!0))}catch(t){}}else(g.autoWidth||g.autoHeight)&&(f.addClass("fancybox-tmp"),g.autoWidth||f.width(n),g.autoHeight||f.height(o),g.autoWidth&&(n=f.width()),g.autoHeight&&(o=f.height()),f.removeClass("fancybox-tmp"));if(p=I(n),m=I(o),s=n/o,y=I(O(y)?I(y,"w")-e:y),w=I(O(w)?I(w,"w")-e:w),v=I(O(v)?I(v,"h")-i:v),a=w,r=x=I(O(x)?I(x,"h")-i:x),g.fitToView&&(w=Math.min(h.w-e,w),x=Math.min(h.h-i,x)),e=h.w-C,R=h.h-R,g.aspectRatio?(m=(p=x<(m=w<p?I((p=w)/s):m)?I((m=x)*s):p)<y?I((p=y)/s):m)<v&&(p=I((m=v)*s)):(p=Math.max(y,Math.min(p,w)),g.autoHeight&&"iframe"!==g.type&&(f.width(p),m=f.height()),m=Math.max(v,Math.min(m,x))),g.fitToView)if(f.width(p).height(m),d.width(p+S),h=d.width(),C=d.height(),g.aspectRatio)for(;(e<h||R<C)&&y<p&&v<m&&!(19<c++);)m=Math.max(v,Math.min(x,m-10)),(p=I(m*s))<y&&(m=I((p=y)/s)),w<p&&(m=I((p=w)/s)),f.width(p).height(m),d.width(p+S),h=d.width(),C=d.height();else p=Math.max(y,Math.min(p,p-(h-e))),m=Math.max(v,Math.min(m,m-(C-R)));k&&"auto"===b&&m<o&&p+S+k<e&&(p+=k),f.width(p).height(m),d.width(p+S),h=d.width(),C=d.height(),d=(e<h||R<C)&&y<p&&v<m,p=g.aspectRatio?p<a&&m<r&&p<n&&m<o:(p<a||m<r)&&(p<n||m<o),j.extend(g,{dim:{width:T(h),height:T(C)},origWidth:n,origHeight:o,canShrink:d,canExpand:p,wPadding:S,hPadding:t,wrapSpace:C-u.outerHeight(!0),skinSpace:u.height()-m}),!l&&g.autoHeight&&v<m&&m<x&&!p&&f.height("auto")},_getPosition:function(t){var e=E.current,i=E.getViewport(),n=e.margin,o=E.wrap.width()+n[1]+n[3],a=E.wrap.height()+n[0]+n[2],n={position:"absolute",top:n[0],left:n[3]};return e.autoCenter&&e.fixed&&!t&&a<=i.h&&o<=i.w?n.position="fixed":e.locked||(n.top+=i.y,n.left+=i.x),n.top=T(Math.max(n.top,n.top+(i.h-a)*e.topRatio)),n.left=T(Math.max(n.left,n.left+(i.w-o)*e.leftRatio)),n},_afterZoomIn:function(){var e=E.current;e&&(E.isOpen=E.isOpened=!0,E.wrap.css("overflow","visible").addClass("fancybox-opened"),E.update(),(e.closeClick||e.nextClick&&1<E.group.length)&&E.inner.css("cursor","pointer").bind("click.fb",function(t){j(t.target).is("a")||j(t.target).parent().is("a")||(t.preventDefault(),E[e.closeClick?"close":"next"]())}),e.closeBtn&&j(e.tpl.closeBtn).appendTo(E.skin).bind("click.fb",function(t){t.preventDefault(),E.close()}),e.arrows&&1<E.group.length&&((e.loop||0<e.index)&&j(e.tpl.prev).appendTo(E.outer).bind("click.fb",E.prev),(e.loop||e.index<E.group.length-1)&&j(e.tpl.next).appendTo(E.outer).bind("click.fb",E.next)),E.trigger("afterShow"),e.loop||e.index!==e.group.length-1?E.opts.autoPlay&&!E.player.isActive&&(E.opts.autoPlay=!1,E.play()):E.play(!1))},_afterZoomOut:function(t){t=t||E.current,j(".fancybox-wrap").trigger("onReset").remove(),j.extend(E,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),E.trigger("afterClose",t)}}),E.transitions={getOrigPosition:function(){var t=E.current,e=t.element,i=t.orig,n={},o=50,a=50,r=t.hPadding,s=t.wPadding,l=E.getViewport();return!i&&t.isDom&&e.is(":visible")&&((i=e.find("img:first")).length||(i=e)),d(i)?(n=i.offset(),i.is("img")&&(o=i.outerWidth(),a=i.outerHeight())):(n.top=l.y+(l.h-a)*t.topRatio,n.left=l.x+(l.w-o)*t.leftRatio),"fixed"!==E.wrap.css("position")&&!t.locked||(n.top-=l.y,n.left-=l.x),{top:T(n.top-r*t.topRatio),left:T(n.left-s*t.leftRatio),width:T(o+s),height:T(a+r)}},step:function(t,e){var i=e.prop,n=E.current,o=n.wrapSpace,a=n.skinSpace;"width"!==i&&"height"!==i||(e=e.end===e.start?1:(t-e.start)/(e.end-e.start),E.isClosing&&(e=1-e),n=t-(n="width"===i?n.wPadding:n.hPadding),E.skin[i](I("width"===i?n:n-o*e)),E.inner[i](I("width"===i?n:n-o*e-a*e)))},zoomIn:function(){var t=E.current,e=t.pos,i=t.openEffect,n="elastic"===i,o=j.extend({opacity:1},e);delete o.position,n?(e=this.getOrigPosition(),t.openOpacity&&(e.opacity=.1)):"fade"===i&&(e.opacity=.1),E.wrap.css(e).animate(o,{duration:"none"===i?0:t.openSpeed,easing:t.openEasing,step:n?this.step:null,complete:E._afterZoomIn})},zoomOut:function(){var t=E.current,e=t.closeEffect,i="elastic"===e,n={opacity:.1};i&&(n=this.getOrigPosition(),t.closeOpacity&&(n.opacity=.1)),E.wrap.animate(n,{duration:"none"===e?0:t.closeSpeed,easing:t.closeEasing,step:i?this.step:null,complete:E._afterZoomOut})},changeIn:function(){var t,e=E.current,i=e.nextEffect,n=e.pos,o={opacity:1},a=E.direction;n.opacity=.1,"elastic"===i&&(t="down"===a||"up"===a?"top":"left","down"===a||"right"===a?(n[t]=T(I(n[t])-200),o[t]="+=200px"):(n[t]=T(I(n[t])+200),o[t]="-=200px")),"none"===i?E._afterZoomIn():E.wrap.css(n).animate(o,{duration:e.nextSpeed,easing:e.nextEasing,complete:E._afterZoomIn})},changeOut:function(){var t=E.previous,e=t.prevEffect,i={opacity:.1},n=E.direction;"elastic"===e&&(i["down"===n||"up"===n?"top":"left"]=("up"===n||"left"===n?"-":"+")+"=200px"),t.wrap.animate(i,{duration:"none"===e?0:t.prevSpeed,easing:t.prevEasing,complete:function(){j(this).trigger("onReset").remove()}})}},E.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!l,fixed:!0},overlay:null,fixed:!1,el:j("html"),create:function(t){t=j.extend({},this.defaults,t),this.overlay&&this.close(),this.overlay=j('<div class="fancybox-overlay"></div>').appendTo((E.coming||t).parent),this.fixed=!1,t.fixed&&E.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(t){var e=this;t=j.extend({},this.defaults,t),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(t),this.fixed||(a.bind("resize.overlay",j.proxy(this.update,this)),this.update()),t.closeClick&&this.overlay.bind("click.overlay",function(t){if(j(t.target).hasClass("fancybox-overlay"))return(E.isActive?E:e).close(),!1}),this.overlay.css(t.css).show()},close:function(){var t,e;a.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(j(".fancybox-margin").removeClass("fancybox-margin"),t=a.scrollTop(),e=a.scrollLeft(),this.el.removeClass("fancybox-lock"),a.scrollTop(t).scrollLeft(e)),j(".fancybox-overlay").remove().hide(),j.extend(this,{overlay:null,fixed:!1})},update:function(){var t,e="100%";this.overlay.width(e).height("100%"),r?(t=Math.max(i.documentElement.offsetWidth,i.body.offsetWidth),h.width()>t&&(e=h.width())):h.width()>a.width()&&(e=h.width()),this.overlay.width(e).height(h.height())},onReady:function(t,e){var i=this.overlay;j(".fancybox-overlay").stop(!0,!0),i||this.create(t),t.locked&&this.fixed&&e.fixed&&(i||(this.margin=h.height()>a.height()&&j("html").css("margin-right").replace("px","")),e.locked=this.overlay.append(e.wrap),e.fixed=!1),!0===t.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(t,e){var i;e.locked&&(!1!==this.margin&&(j("*").filter(function(){return"fixed"===j(this).css("position")&&!j(this).hasClass("fancybox-overlay")&&!j(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),i=a.scrollTop(),e=a.scrollLeft(),this.el.addClass("fancybox-lock"),a.scrollTop(i).scrollLeft(e)),this.open(t)},onUpdate:function(){this.fixed||this.update()},afterClose:function(t){this.overlay&&!E.coming&&this.overlay.fadeOut(t.speedOut,j.proxy(this.close,this))}},E.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(t){var e=E.current,i=e.title,n=t.type;if(j.isFunction(i)&&(i=i.call(e.element,e)),p(i)&&""!==j.trim(i)){switch(e=j('<div class="fancybox-title fancybox-title-'+n+'-wrap">'+i+"</div>"),n){case"inside":n=E.skin;break;case"outside":n=E.wrap;break;case"over":n=E.inner;break;default:n=E.skin,e.appendTo("body"),r&&e.width(e.width()),e.wrapInner('<span class="child"></span>'),E.current.margin[2]+=Math.abs(I(e.css("margin-bottom")))}e["top"===t.position?"prependTo":"appendTo"](n)}}},j.fn.fancybox=function(a){function t(t){var e,i,n=j(this).blur(),o=l;t.ctrlKey||t.altKey||t.shiftKey||t.metaKey||n.is(".fancybox-wrap")||(e=a.groupAttr||"data-fancybox-group",(i=n.attr(e))||(e="rel",i=n.get(0)[e]),i&&""!==i&&"nofollow"!==i&&(o=(n=(n=s.length?j(s):r).filter("["+e+'="'+i+'"]')).index(this)),a.index=o,!1!==E.open(n,a)&&t.preventDefault())}var r=j(this),s=this.selector||"",l=(a=a||{}).index||0;return s&&!1!==a.live?h.undelegate(s,"click.fb-start").delegate(s+":not('.fancybox-item, .fancybox-nav')","click.fb-start",t):r.unbind("click.fb-start").bind("click.fb-start",t),this.filter("[data-fancybox-start=1]").trigger("click"),this},h.ready(function(){var t,e,i;j.scrollbarWidth===c&&(j.scrollbarWidth=function(){var t=j('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),e=(e=t.children()).innerWidth()-e.height(99).innerWidth();return t.remove(),e}),j.support.fixedPosition===c&&(t=j.support,i=20===(e=j('<div style="position:fixed;top:20px;"></div>').appendTo("body"))[0].offsetTop||15===e[0].offsetTop,e.remove(),t.fixedPosition=i),j.extend(E.defaults,{scrollbarWidth:j.scrollbarWidth(),fixed:j.support.fixedPosition,parent:j("body")}),t=j(n).width(),o.addClass("fancybox-lock-test"),e=j(n).width(),o.removeClass("fancybox-lock-test"),j("<style type='text/css'>.fancybox-margin{margin-right:"+(e-t)+"px;}</style>").appendTo("head")})}(window,document,jQuery),function(i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof module&&module.exports?module.exports=function(t,e){return void 0===e&&(e="undefined"!=typeof window?require("jquery"):require("jquery")(t)),i(e),e}:i(jQuery)}(function(h){function o(t,e){this.settings=e,this.checkSettings(),this.imgAnalyzerTimeout=null,this.entries=null,this.buildingRow={entriesBuff:[],width:0,height:0,aspectRatio:0},this.lastFetchedEntry=null,this.lastAnalyzedIndex=-1,this.yield={every:2,flushed:0},this.border=0<=e.border?e.border:e.margins,this.maxRowHeight=this.retrieveMaxRowHeight(),this.suffixRanges=this.retrieveSuffixRanges(),this.offY=this.border,this.rows=0,this.spinner={phase:0,timeSlot:150,$el:h('<div class="jg-spinner"><span></span><span></span><span></span></div>'),intervalId:null},this.scrollBarOn=!1,this.checkWidthIntervalId=null,this.galleryWidth=t.width(),this.$gallery=t}o.prototype.getSuffix=function(t,e){for(var i=e<t?t:e,n=0;n<this.suffixRanges.length;n++)if(i<=this.suffixRanges[n])return this.settings.sizeRangeSuffixes[this.suffixRanges[n]];return this.settings.sizeRangeSuffixes[this.suffixRanges[n-1]]},o.prototype.removeSuffix=function(t,e){return t.substring(0,t.length-e.length)},o.prototype.endsWith=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},o.prototype.getUsedSuffix=function(t){for(var e in this.settings.sizeRangeSuffixes)if(this.settings.sizeRangeSuffixes.hasOwnProperty(e)){if(0===this.settings.sizeRangeSuffixes[e].length)continue;if(this.endsWith(t,this.settings.sizeRangeSuffixes[e]))return this.settings.sizeRangeSuffixes[e]}return""},o.prototype.newSrc=function(t,e,i,n){var o;return this.settings.thumbnailPath?o=this.settings.thumbnailPath(t,e,i,n):(n=null!==(n=t.match(this.settings.extension))?n[0]:"",o=t.replace(this.settings.extension,""),o=this.removeSuffix(o,this.getUsedSuffix(o)),o+=this.getSuffix(e,i)+n),o},o.prototype.showImg=function(t,e){this.settings.cssAnimation?(t.addClass("jg-entry-visible"),e&&e()):(t.stop().fadeTo(this.settings.imagesAnimationDuration,1,e),t.find(this.settings.imgSelector).stop().fadeTo(this.settings.imagesAnimationDuration,1,e))},o.prototype.extractImgSrcFromImage=function(t){var e=t.data("safe-src"),i="data-safe-src";return void 0===e&&(e=t.attr("src"),i="src"),t.data("jg.originalSrc",e),t.data("jg.src",e),t.data("jg.originalSrcLoc",i),e},o.prototype.imgFromEntry=function(t){t=t.find(this.settings.imgSelector);return 0===t.length?null:t},o.prototype.captionFromEntry=function(t){t=t.find("> .jg-caption");return 0===t.length?null:t},o.prototype.displayEntry=function(t,e,i,n,o,a){t.width(n),t.height(a),t.css("top",i),t.css("left",e);var r,s,l=this.imgFromEntry(t);null!==l?(l.css("width",n),l.css("height",o),l.css("margin-left",-n/2),l.css("margin-top",-o/2),(r=l.data("jg.src"))&&(r=this.newSrc(r,n,o,l[0]),l.one("error",function(){this.resetImgSrc(l)}),s=function(){l.attr("src",r)},"skipped"===t.data("jg.loaded")&&r?this.onImageEvent(r,function(){this.showImg(t,s),t.data("jg.loaded",!0)}.bind(this)):this.showImg(t,s))):this.showImg(t),this.displayEntryCaption(t)},o.prototype.displayEntryCaption=function(t){var e,i=this.imgFromEntry(t);null!==i&&this.settings.captions?(null===(e=this.captionFromEntry(t))&&(i=i.attr("alt"),this.isValidCaption(i)||(i=t.attr("title")),this.isValidCaption(i)&&(e=h('<div class="jg-caption">'+i+"</div>"),t.append(e),t.data("jg.createdCaption",!0))),null!==e&&(this.settings.cssAnimation||e.stop().fadeTo(0,this.settings.captionSettings.nonVisibleOpacity),this.addCaptionEventsHandlers(t))):this.removeCaptionEventsHandlers(t)},o.prototype.isValidCaption=function(t){return void 0!==t&&0<t.length},o.prototype.onEntryMouseEnterForCaption=function(t){t=this.captionFromEntry(h(t.currentTarget));this.settings.cssAnimation?t.addClass("jg-caption-visible").removeClass("jg-caption-hidden"):t.stop().fadeTo(this.settings.captionSettings.animationDuration,this.settings.captionSettings.visibleOpacity)},o.prototype.onEntryMouseLeaveForCaption=function(t){t=this.captionFromEntry(h(t.currentTarget));this.settings.cssAnimation?t.removeClass("jg-caption-visible").removeClass("jg-caption-hidden"):t.stop().fadeTo(this.settings.captionSettings.animationDuration,this.settings.captionSettings.nonVisibleOpacity)},o.prototype.addCaptionEventsHandlers=function(t){var e;void 0===(e=t.data("jg.captionMouseEvents"))&&(e={mouseenter:h.proxy(this.onEntryMouseEnterForCaption,this),mouseleave:h.proxy(this.onEntryMouseLeaveForCaption,this)},t.on("mouseenter",void 0,void 0,e.mouseenter),t.on("mouseleave",void 0,void 0,e.mouseleave),t.data("jg.captionMouseEvents",e))},o.prototype.removeCaptionEventsHandlers=function(t){var e=t.data("jg.captionMouseEvents");void 0!==e&&(t.off("mouseenter",void 0,e.mouseenter),t.off("mouseleave",void 0,e.mouseleave),t.removeData("jg.captionMouseEvents"))},o.prototype.clearBuildingRow=function(){this.buildingRow.entriesBuff=[],this.buildingRow.aspectRatio=0,this.buildingRow.width=0},o.prototype.prepareBuildingRow=function(t,e){var i,n,o,a,r=!0,s=0,l=this.galleryWidth-2*this.border-(this.buildingRow.entriesBuff.length-1)*this.settings.margins,h=l/this.buildingRow.aspectRatio,c=this.settings.rowHeight,d=this.buildingRow.width/l>this.settings.justifyThreshold;if(e||t&&"hide"===this.settings.lastRow&&!d){for(i=0;i<this.buildingRow.entriesBuff.length;i++)n=this.buildingRow.entriesBuff[i],this.settings.cssAnimation?n.removeClass("jg-entry-visible"):(n.stop().fadeTo(0,.1),n.find("> img, > a > img").fadeTo(0,0));return-1}for(t&&!d&&"justify"!==this.settings.lastRow&&"hide"!==this.settings.lastRow&&(r=!1,0<this.rows&&(r=(c=(this.offY-this.border-this.settings.margins*this.rows)/this.rows)*this.buildingRow.aspectRatio/l>this.settings.justifyThreshold)),i=0;i<this.buildingRow.entriesBuff.length;i++)a=(n=this.buildingRow.entriesBuff[i]).data("jg.width")/n.data("jg.height"),a=r?(o=i===this.buildingRow.entriesBuff.length-1?l:h*a,h):(o=c*a,c),l-=Math.round(o),n.data("jg.jwidth",Math.round(o)),n.data("jg.jheight",Math.ceil(a)),(0===i||a<s)&&(s=a);return this.buildingRow.height=s,r},o.prototype.flushRow=function(t,e){var i,n=this.settings,o=this.border,a=this.prepareBuildingRow(t,e);if(e||t&&"hide"===n.lastRow&&-1===a)this.clearBuildingRow();else{if(this.maxRowHeight&&this.maxRowHeight<this.buildingRow.height&&(this.buildingRow.height=this.maxRowHeight),t&&("center"===n.lastRow||"right"===n.lastRow)){for(var r=this.galleryWidth-2*this.border-(this.buildingRow.entriesBuff.length-1)*n.margins,s=0;s<this.buildingRow.entriesBuff.length;s++)r-=(i=this.buildingRow.entriesBuff[s]).data("jg.jwidth");"center"===n.lastRow?o+=Math.round(r/2):"right"===n.lastRow&&(o+=r)}var l=this.buildingRow.entriesBuff.length-1;for(s=0;s<=l;s++)i=this.buildingRow.entriesBuff[this.settings.rtl?l-s:s],this.displayEntry(i,o,this.offY,i.data("jg.jwidth"),i.data("jg.jheight"),this.buildingRow.height),o+=i.data("jg.jwidth")+n.margins;this.galleryHeightToSet=this.offY+this.buildingRow.height+this.border,this.setGalleryTempHeight(this.galleryHeightToSet+this.getSpinnerHeight()),(!t||this.buildingRow.height<=n.rowHeight&&a)&&(this.offY+=this.buildingRow.height+n.margins,this.rows+=1,this.clearBuildingRow(),this.settings.triggerEvent.call(this,"jg.rowflush"))}};var e=0;o.prototype.rememberGalleryHeight=function(){e=this.$gallery.height(),this.$gallery.height(e)},o.prototype.setGalleryTempHeight=function(t){e=Math.max(t,e),this.$gallery.height(e)},o.prototype.setGalleryFinalHeight=function(t){e=t,this.$gallery.height(t)},o.prototype.checkWidth=function(){this.checkWidthIntervalId=setInterval(h.proxy(function(){var t;this.$gallery.is(":visible")&&(t=parseFloat(this.$gallery.width()),Math.abs(t-this.galleryWidth)>this.settings.refreshSensitivity&&(this.galleryWidth=t,this.rewind(),this.rememberGalleryHeight(),this.startImgAnalyzer(!0)))},this),this.settings.refreshTime)},o.prototype.isSpinnerActive=function(){return null!==this.spinner.intervalId},o.prototype.getSpinnerHeight=function(){return this.spinner.$el.innerHeight()},o.prototype.stopLoadingSpinnerAnimation=function(){clearInterval(this.spinner.intervalId),this.spinner.intervalId=null,this.setGalleryTempHeight(this.$gallery.height()-this.getSpinnerHeight()),this.spinner.$el.detach()},o.prototype.startLoadingSpinnerAnimation=function(){var t=this.spinner,e=t.$el.find("span");clearInterval(t.intervalId),this.$gallery.append(t.$el),this.setGalleryTempHeight(this.offY+this.buildingRow.height+this.getSpinnerHeight()),t.intervalId=setInterval(function(){t.phase<e.length?e.eq(t.phase).fadeTo(t.timeSlot,1):e.eq(t.phase-e.length).fadeTo(t.timeSlot,0),t.phase=(t.phase+1)%(2*e.length)},t.timeSlot)},o.prototype.rewind=function(){this.lastFetchedEntry=null,this.lastAnalyzedIndex=-1,this.offY=this.border,this.rows=0,this.clearBuildingRow()},o.prototype.getSelectorWithoutSpinner=function(){return this.settings.selector+", div:not(.jg-spinner)"},o.prototype.getAllEntries=function(){var t=this.getSelectorWithoutSpinner();return this.$gallery.children(t).toArray()},o.prototype.updateEntries=function(t){var e;return 0<(e=t&&null!=this.lastFetchedEntry?(e=this.getSelectorWithoutSpinner(),h(this.lastFetchedEntry).nextAll(e).toArray()):(this.entries=[],this.getAllEntries())).length&&(h.isFunction(this.settings.sort)?e=this.sortArray(e):this.settings.randomize&&(e=this.shuffleArray(e)),this.lastFetchedEntry=e[e.length-1],this.settings.filter?e=this.filterArray(e):this.resetFilters(e)),this.entries=this.entries.concat(e),!0},o.prototype.insertToGallery=function(t){var e=this;h.each(t,function(){h(this).appendTo(e.$gallery)})},o.prototype.shuffleArray=function(t){for(var e,i,n=t.length-1;0<n;n--)e=Math.floor(Math.random()*(n+1)),i=t[n],t[n]=t[e],t[e]=i;return this.insertToGallery(t),t},o.prototype.sortArray=function(t){return t.sort(this.settings.sort),this.insertToGallery(t),t},o.prototype.resetFilters=function(t){for(var e=0;e<t.length;e++)h(t[e]).removeClass("jg-filtered")},o.prototype.filterArray=function(t){var e=this.settings;if("string"===h.type(e.filter))return t.filter(function(t){t=h(t);return t.is(e.filter)?(t.removeClass("jg-filtered"),!0):(t.addClass("jg-filtered").removeClass("jg-visible"),!1)});if(h.isFunction(e.filter)){for(var i=t.filter(e.filter),n=0;n<t.length;n++)-1===i.indexOf(t[n])?h(t[n]).addClass("jg-filtered").removeClass("jg-visible"):h(t[n]).removeClass("jg-filtered");return i}},o.prototype.resetImgSrc=function(t){"src"===t.data("jg.originalSrcLoc")?t.attr("src",t.data("jg.originalSrc")):t.attr("src","")},o.prototype.destroy=function(){clearInterval(this.checkWidthIntervalId),this.stopImgAnalyzerStarter(),h.each(this.getAllEntries(),h.proxy(function(t,e){var i=h(e);i.css("width",""),i.css("height",""),i.css("top",""),i.css("left",""),i.data("jg.loaded",void 0),i.removeClass("jg-entry jg-filtered jg-entry-visible");e=this.imgFromEntry(i);e&&(e.css("width",""),e.css("height",""),e.css("margin-left",""),e.css("margin-top",""),this.resetImgSrc(e),e.data("jg.originalSrc",void 0),e.data("jg.originalSrcLoc",void 0),e.data("jg.src",void 0)),this.removeCaptionEventsHandlers(i);e=this.captionFromEntry(i);i.data("jg.createdCaption")?(i.data("jg.createdCaption",void 0),null!==e&&e.remove()):null!==e&&e.fadeTo(0,1)},this)),this.$gallery.css("height",""),this.$gallery.removeClass("justified-gallery"),this.$gallery.data("jg.controller",void 0),this.settings.triggerEvent.call(this,"jg.destroy")},o.prototype.analyzeImages=function(t){for(var e=this.lastAnalyzedIndex+1;e<this.entries.length;e++){var i=h(this.entries[e]);if(!0===i.data("jg.loaded")||"skipped"===i.data("jg.loaded")){var n=this.galleryWidth-2*this.border-(this.buildingRow.entriesBuff.length-1)*this.settings.margins,o=i.data("jg.width")/i.data("jg.height");if(this.buildingRow.entriesBuff.push(i),this.buildingRow.aspectRatio+=o,this.buildingRow.width+=o*this.settings.rowHeight,this.lastAnalyzedIndex=e,n/(this.buildingRow.aspectRatio+o)<this.settings.rowHeight&&(this.flushRow(!1,0<this.settings.maxRowsCount&&this.rows===this.settings.maxRowsCount),++this.yield.flushed>=this.yield.every))return void this.startImgAnalyzer(t)}else if("error"!==i.data("jg.loaded"))return}0<this.buildingRow.entriesBuff.length&&this.flushRow(!0,0<this.settings.maxRowsCount&&this.rows===this.settings.maxRowsCount),this.isSpinnerActive()&&this.stopLoadingSpinnerAnimation(),this.stopImgAnalyzerStarter(),this.setGalleryFinalHeight(this.galleryHeightToSet),this.settings.triggerEvent.call(this,t?"jg.resize":"jg.complete")},o.prototype.stopImgAnalyzerStarter=function(){this.yield.flushed=0,null!==this.imgAnalyzerTimeout&&(clearTimeout(this.imgAnalyzerTimeout),this.imgAnalyzerTimeout=null)},o.prototype.startImgAnalyzer=function(t){var e=this;this.stopImgAnalyzerStarter(),this.imgAnalyzerTimeout=setTimeout(function(){e.analyzeImages(t)},.001)},o.prototype.onImageEvent=function(t,e,i){var n,o;(e||i)&&(n=new Image,o=h(n),e&&o.one("load",function(){o.off("load error"),e(n)}),i&&o.one("error",function(){o.off("load error"),i(n)}),n.src=t)},o.prototype.init=function(){var r=!1,s=!1,l=this;h.each(this.entries,function(t,e){var i=h(e),n=l.imgFromEntry(i);if(i.addClass("jg-entry"),!0!==i.data("jg.loaded")&&"skipped"!==i.data("jg.loaded"))if(null!==l.settings.rel&&i.attr("rel",l.settings.rel),null!==l.settings.target&&i.attr("target",l.settings.target),null!==n){var o=l.extractImgSrcFromImage(n);if(!1===l.settings.waitThumbnailsLoad||!o){var a=parseFloat(n.attr("width")),e=parseFloat(n.attr("height"));if("svg"===n.prop("tagName")&&(a=parseFloat(n[0].getBBox().width),e=parseFloat(n[0].getBBox().height)),!isNaN(a)&&!isNaN(e))return i.data("jg.width",a),i.data("jg.height",e),i.data("jg.loaded","skipped"),s=!0,l.startImgAnalyzer(!1),!0}i.data("jg.loaded",!1),r=!0,l.isSpinnerActive()||l.startLoadingSpinnerAnimation(),l.onImageEvent(o,function(t){i.data("jg.width",t.width),i.data("jg.height",t.height),i.data("jg.loaded",!0),l.startImgAnalyzer(!1)},function(){i.data("jg.loaded","error"),l.startImgAnalyzer(!1)})}else i.data("jg.loaded",!0),i.data("jg.width",i.width()|parseFloat(i.css("width"))|1),i.data("jg.height",i.height()|parseFloat(i.css("height"))|1)}),r||s||this.startImgAnalyzer(!1),this.checkWidth()},o.prototype.checkOrConvertNumber=function(t,e){if("string"===h.type(t[e])&&(t[e]=parseFloat(t[e])),"number"!==h.type(t[e]))throw e+" must be a number";if(isNaN(t[e]))throw"invalid number for "+e},o.prototype.checkSizeRangesSuffixes=function(){if("object"!==h.type(this.settings.sizeRangeSuffixes))throw"sizeRangeSuffixes must be defined and must be an object";var t,e=[];for(t in this.settings.sizeRangeSuffixes)this.settings.sizeRangeSuffixes.hasOwnProperty(t)&&e.push(t);for(var i={0:""},n=0;n<e.length;n++)if("string"===h.type(e[n]))try{i[parseInt(e[n].replace(/^[a-z]+/,""),10)]=this.settings.sizeRangeSuffixes[e[n]]}catch(e){throw"sizeRangeSuffixes keys must contains correct numbers ("+e+")"}else i[e[n]]=this.settings.sizeRangeSuffixes[e[n]];this.settings.sizeRangeSuffixes=i},o.prototype.retrieveMaxRowHeight=function(){var t=null,e=this.settings.rowHeight;if("string"===h.type(this.settings.maxRowHeight))t=this.settings.maxRowHeight.match(/^[0-9]+%$/)?e*parseFloat(this.settings.maxRowHeight.match(/^([0-9]+)%$/)[1])/100:parseFloat(this.settings.maxRowHeight);else{if("number"!==h.type(this.settings.maxRowHeight)){if(!1===this.settings.maxRowHeight||null==this.settings.maxRowHeight)return null;throw"maxRowHeight must be a number or a percentage"}t=this.settings.maxRowHeight}if(isNaN(t))throw"invalid number for maxRowHeight";return t=t<e?e:t},o.prototype.checkSettings=function(){this.checkSizeRangesSuffixes(),this.checkOrConvertNumber(this.settings,"rowHeight"),this.checkOrConvertNumber(this.settings,"margins"),this.checkOrConvertNumber(this.settings,"border"),this.checkOrConvertNumber(this.settings,"maxRowsCount");var t=["justify","nojustify","left","center","right","hide"];if(-1===t.indexOf(this.settings.lastRow))throw"lastRow must be one of: "+t.join(", ");if(this.checkOrConvertNumber(this.settings,"justifyThreshold"),this.settings.justifyThreshold<0||1<this.settings.justifyThreshold)throw"justifyThreshold must be in the interval [0,1]";if("boolean"!==h.type(this.settings.cssAnimation))throw"cssAnimation must be a boolean";if("boolean"!==h.type(this.settings.captions))throw"captions must be a boolean";if(this.checkOrConvertNumber(this.settings.captionSettings,"animationDuration"),this.checkOrConvertNumber(this.settings.captionSettings,"visibleOpacity"),this.settings.captionSettings.visibleOpacity<0||1<this.settings.captionSettings.visibleOpacity)throw"captionSettings.visibleOpacity must be in the interval [0, 1]";if(this.checkOrConvertNumber(this.settings.captionSettings,"nonVisibleOpacity"),this.settings.captionSettings.nonVisibleOpacity<0||1<this.settings.captionSettings.nonVisibleOpacity)throw"captionSettings.nonVisibleOpacity must be in the interval [0, 1]";if(this.checkOrConvertNumber(this.settings,"imagesAnimationDuration"),this.checkOrConvertNumber(this.settings,"refreshTime"),this.checkOrConvertNumber(this.settings,"refreshSensitivity"),"boolean"!==h.type(this.settings.randomize))throw"randomize must be a boolean";if("string"!==h.type(this.settings.selector))throw"selector must be a string";if(!1!==this.settings.sort&&!h.isFunction(this.settings.sort))throw"sort must be false or a comparison function";if(!1!==this.settings.filter&&!h.isFunction(this.settings.filter)&&"string"!==h.type(this.settings.filter))throw"filter must be false, a string or a filter function"},o.prototype.retrieveSuffixRanges=function(){var t,e=[];for(t in this.settings.sizeRangeSuffixes)this.settings.sizeRangeSuffixes.hasOwnProperty(t)&&e.push(parseInt(t,10));return e.sort(function(t,e){return e<t?1:t<e?-1:0}),e},o.prototype.updateSettings=function(t){this.settings=h.extend({},this.settings,t),this.checkSettings(),this.border=0<=this.settings.border?this.settings.border:this.settings.margins,this.maxRowHeight=this.retrieveMaxRowHeight(),this.suffixRanges=this.retrieveSuffixRanges()},o.prototype.defaults={sizeRangeSuffixes:{},thumbnailPath:void 0,rowHeight:120,maxRowHeight:!1,maxRowsCount:0,margins:1,border:-1,lastRow:"nojustify",justifyThreshold:.9,waitThumbnailsLoad:!0,captions:!0,cssAnimation:!0,imagesAnimationDuration:500,captionSettings:{animationDuration:500,visibleOpacity:.7,nonVisibleOpacity:0},rel:null,target:null,extension:/\.[^.\\/]+$/,refreshTime:200,refreshSensitivity:0,randomize:!1,rtl:!1,sort:!1,filter:!1,selector:"a",imgSelector:"> img, > a > img, > svg, > a > svg",triggerEvent:function(t){this.$gallery.trigger(t)}},h.fn.justifiedGallery=function(n){return this.each(function(t,e){var i=h(e);i.addClass("justified-gallery");e=i.data("jg.controller");if(void 0===e){if(null!=n&&"object"!==h.type(n)){if("destroy"===n)return;throw"The argument must be an object"}e=new o(i,h.extend({},o.prototype.defaults,n)),i.data("jg.controller",e)}else if("norewind"!==n){if("destroy"===n)return void e.destroy();e.updateSettings(n),e.rewind()}e.updateEntries("norewind"===n)&&e.init()})}});